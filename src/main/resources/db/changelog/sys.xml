<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">


    <!-- [ 租户 ] 租户表 -->
    <changeSet id="1670813888-1" author="WangChenChen (generated)">
        <sql splitStatements="true">
            CREATE TABLE `sys_tenant`
            (
                `tenant_id`        varchar(20)  NOT NULL COMMENT '租户 ID',
                `logo`             varchar(255) NOT NULL COMMENT '租户 logo',
                `name`             varchar(255) NOT NULL COMMENT '租户名称',
                `email`            varchar(50)  NOT NULL COMMENT '租户邮箱',
                `linkman`          varchar(255) NOT NULL COMMENT '联系人名称',
                `contact_number`   varchar(50)  NOT NULL COMMENT '联系电话',
                `area_code`        bigint(20) NOT NULL COMMENT '行政区域',
                `address`          varchar(255) NOT NULL COMMENT '联系地址',
                `status`           tinyint(4) NOT NULL DEFAULT '1' COMMENT '租户状态 0.不可用 1.正常',
                `expired`          datetime     NOT NULL COMMENT '过期时间。默认是 10 年',
                `create_time`      datetime     NOT NULL COMMENT '添加时间',
                `create_user`      bigint(20) NOT NULL COMMENT '创建人',
                `last_update_time` datetime     NOT NULL COMMENT '最后一次，修改时间',
                `last_update_user` bigint(20) NOT NULL COMMENT '最后一次，修改人',
                PRIMARY KEY (`tenant_id`) USING BTREE,
                UNIQUE KEY `tenant_id_unique_lkmnrf213jlnr` (`tenant_id`) USING BTREE
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='[ 租户 ] 租户表';


            INSERT INTO `sys_tenant` (`tenant_id`, `create_time`, `create_user`, `last_update_time`,
                                      `last_update_user`, `logo`, `name`, `email`, `linkman`,
                                      `contact_number`, `area_code`, `address`, `status`, `expired`)
            VALUES ('master', '2022-12-12 10:07:26', 19980817, '2022-12-12 10:07:32', 19980817,
                    'https://images.xaaef.com/molly_master_logo.png', 'master', 'master@qq.com', 'master',
                    '0755-1234567', 440307000000, '平湖街道 城市山海大厦', 1, '6666-12-12 00:00:00');
        </sql>
    </changeSet>


    <!-- [ 租户 ] 租户和权限模板表 -->
    <changeSet id="1670813888-2" author="WangChenChen (generated)">
        <sql stripComments="true">
            CREATE TABLE `sys_tenant_template`
            (
                `tenant_id`   varchar(20) NOT NULL COMMENT '租户ID',
                `template_id` bigint(20) NOT NULL COMMENT '模板 ID'
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='[ 租户 ] 租户和权限模板表';

            INSERT INTO `sys_tenant_template` (`tenant_id`, `template_id`)
            VALUES ('master', 10001);
        </sql>
    </changeSet>


    <!-- [ 租户 ] 权限模板表 -->
    <changeSet id="1670814962-1" author="WangChenChen (generated)">
        <sql stripComments="true">
            CREATE TABLE `sys_template`
            (
                `id`               bigint(20) NOT NULL AUTO_INCREMENT COMMENT '模板ID',
                `name`             varchar(50)  NOT NULL COMMENT '模板名称',
                `description`      varchar(200) NOT NULL COMMENT '备注',
                `create_time`      datetime     NOT NULL COMMENT '添加时间',
                `create_user`      bigint(20) NOT NULL COMMENT '创建人',
                `last_update_time` datetime     NOT NULL COMMENT '最后一次，修改时间',
                `last_update_user` bigint(20) NOT NULL COMMENT '最后一次，修改人',
                PRIMARY KEY (`id`) USING BTREE
            ) ENGINE=InnoDB AUTO_INCREMENT=10001 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='[ 租户 ] 权限模板表';

            INSERT INTO `sys_template` (`id`, `name`, `description`, `create_time`, `create_user`, `last_update_time`,
                                        `last_update_user`)
            VALUES (10001, '全部模块', '全部模块', '2022-06-10 22:58:39', 19980817, '2022-06-10 22:58:39',
                    19980817);

        </sql>
    </changeSet>


    <!-- [ 租户 ] 模板和菜单权限表 -->
    <changeSet id="1670814962-2" author="WangChenChen (generated)">
        <sql stripComments="true">
            CREATE TABLE `sys_template_menu`
            (
                `template_id` bigint(20) NOT NULL COMMENT '模板 ID',
                `menu_id`     bigint(20) NOT NULL COMMENT '菜单ID'
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='[ 租户 ] 模板和菜单权限表';
        </sql>
    </changeSet>


</databaseChangeLog>
